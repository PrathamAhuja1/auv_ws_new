# Gate Navigation Parameters - SMART FLARE AVOIDANCE VERSION

gate_detector_node:
  ros__parameters:
    # HSV RANGES - Pure colors for Gazebo
    red_lower1: [0, 100, 100]
    red_upper1: [10, 255, 255]
    red_lower2: [170, 100, 100]
    red_upper2: [180, 255, 255]
    
    green_lower: [40, 100, 100]
    green_upper: [80, 255, 255]
    
    orange_lower: [10, 120, 120]
    orange_upper: [25, 255, 255]
    
    # Detection parameters
    min_area_strict: 300
    min_area_relaxed: 80
    aspect_threshold: 0.8
    gate_width_meters: 1.5
    
    # Temporal filtering
    detection_history_size: 3
    min_detections_for_confirm: 1
    
    publish_debug: true

# Gate Navigation Parameters
gate_navigator_node:
  ros__parameters:
  
    target_depth: -1.7
    depth_deadband: 0.25
    depth_gain_weak: 0.5
    depth_gain_strong: 1.5
    
    # Search behavior
    search_speed: 0.4
    
    # CRITICAL: Approach parameters
    approach_speed: 0.6          # Constant forward speed
    alignment_gain: 2.0           # Proportional yaw control
    max_yaw_correction: 0.8       # Maximum turn rate (rad/s)
    min_confidence_for_approach: 0.3
    
    # Passing parameters
    passing_speed: 1.0
    passing_distance: 2.0         # Start passing at 2m
    passing_duration: 6.0
    
    
    # Only trigger avoidance when flare is THIS close
    # (2m gives time to react without panicking)
    flare_critical_distance: 2.0
    
    # Gentle lateral movement (0.4 m/s is slow and controlled)
    # This prevents over-correction and gate loss
    flare_lateral_speed: 0.4
    
    # Keep moving forward during avoidance (0.3 m/s)
    # This ensures progress and prevents stalling
    flare_forward_speed: 0.3
    
    # Maximum time to spend avoiding (10s timeout)
    # Prevents infinite avoidance loops
    flare_max_duration: 10.0
    
    # =============================================